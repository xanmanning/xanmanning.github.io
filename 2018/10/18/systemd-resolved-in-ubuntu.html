<!DOCTYPE html>
<html>

<head>
  <title>Xan Manning</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Xan Manning">
  <meta name="description" content="Ramblings of a Linux geek and cloud fanatic dabbling in DevOps!">
  <meta http-equiv="content-language" content="" />
  <meta name="generator" content="Jekyll v3.6.0">

  <!--[if lte IE 8]><script src="/js/ie/html5shiv.js"></script><![endif]-->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <!--[if lte IE 8]><link rel="stylesheet" href="/css/ie8.css" /><![endif]-->

  <link rel="icon" type="image/png" href="/images/favicon.png"> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Xan Manning" />

</head>

<body id="top">
  <header id="header">
    <a href="/" class="image avatar"><img  src="/images/avatar.png" alt="Xan Manning"></a>
    <h1><a href="/">Xan Manning</a> &nbsp; &raquo; &nbsp; <a href="/about" class="aboutlink">About</a></h1>
    <div class="tagline">Ramblings of a Linux geek and cloud fanatic dabbling in DevOps!</div>
  </header>

  <div id="main">
  <article>
    <header>
      <h1 class="post-title">Systemd-resolved, Flushing DNS in Ubuntu 18.04 (and other distributions).</h1>
      <p class="post-meta">Oct 18, 2018</p>
    </header>

    <section>
      <p>Today I’ve been playing with static DNS on my router, sadly Miktotik doesn’t
support “DNS Doctoring” and it doesn’t look like Ubiquiti Networks equipment
does either (as of 2018). It’s likely a feature I got spoilt with on a couple
of Cisco routers I had access to.</p>

<p>Anyway, back to the point. Using Ubuntu 16.04 for a long time on my work laptop
and now CentOS 7 I have been used to working with <code class="highlighter-rouge">dnsmasq</code> and how to clear
the cache.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[ xmanning@pc-xmann-01: ~ ] $ grep -E "^PRETTY_NAME" /etc/os-release &amp;&amp; sudo ss -pant | grep -E "^LISTEN" | grep :53
PRETTY_NAME="CentOS Linux 7 (Core)"
LISTEN     0      5      192.168.122.1:53                       *:*                   users:(("dnsmasq",pid=2462,fd=6))
</code></pre></div></div>

<p>On Ubuntu 18.04, and other distributions of course, this has been replaced with
a systemd service called <code class="highlighter-rouge">systemd-resolved</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[ xmanning@dreadfort:~ ] $ grep -E "^PRETTY_NAME" /etc/os-release &amp;&amp; sudo ss -pant | grep -E "^LISTEN" | grep :53
PRETTY_NAME="Ubuntu 18.04.1 LTS"
LISTEN      0        128         127.0.0.53%lo:53               0.0.0.0:*        users:(("systemd-resolve",pid=6977,fd=13))
</code></pre></div></div>

<p>So, to flush! If you’re finding there’s a need to clear the DNS cache here’s
how you do it:</p>

<p><strong>Method 1:</strong> <code class="highlighter-rouge">sudo systemd-resolve --flush-caches</code></p>

<p><strong>Method 2:</strong> <code class="highlighter-rouge">sudo systemctl restart systemd-resolved</code></p>

<h2 id="sources">Sources</h2>

<ul>
  <li>man <a href="http://man7.org/linux/man-pages/man1/systemd-resolve.1.html">systemd-resolve(1)</a></li>
</ul>

    </section>

    <footer>
      <div class="row">
      
        <article class="6u 12u(small) excerpt">
          <header>
            <h2><a href="/2018/09/24/https-auth-in-git.html">Remembering HTTPS Authentication in git</a></h2>
          </header>
          <section>
            <p>Quick tip for anyone who is wanting git to remember their username/password
when issuing push/pulls to a git repository over HTTPS, run the following:</p>


          </section>
          <footer>
            <ul class="actions">
              <li><a href="/2018/09/24/https-auth-in-git.html" class="button">Read More</a></li>
            </ul>
          </footer>
        </article>
      

      
        <article class="6u$ 12u(small) excerpt f-right">
          <header>
            <h2><a href="/2018/11/11/snippet-list-hana-mdc-tenants.html">Snippet - List tenants of an SAP HANA MDC</a></h2>
          </header>
          <section>
            <p>I thought I would share a snippet of code that I have found useful for
discovering all of the SIDs and Tenants running on an SAP HANA system running
with Multitenant Database Containers (MDC). If you are running HANA 2.0 this
is your default operating mode.</p>


          </section>
          <footer>
            <ul class="actions">
              <li><a href="/2018/11/11/snippet-list-hana-mdc-tenants.html" class="button">Read More</a></li>
            </ul>
          </footer>
        </article>
      
      </div>
    </footer>
  </article>
</div>


  <footer id="footer">
    <ul class="icons">
      
      <li>
        <a  href="/contact" class="icon fa-envelope" >
              <span class="label">Email</span>
                        </a>
      </li>
      
      <li>
        <a target="_blank"  href="https://keybase.io/manningx" class="icon fa-key" >
              <span class="label">Keybase</span>
                        </a>
      </li>
      
      <li>
        <a target="_blank"  href="https://www.facebook.com/xan.manning" class="icon fa-facebook" >
              <span class="label">Facebook</span>
                        </a>
      </li>
      
      <li>
        <a target="_blank"  href="https://twitter.com/xanmanning" class="icon fa-twitter" >
              <span class="label">Twitter</span>
                        </a>
      </li>
      
      <li>
        <a target="_blank"  href="https://github.com/xanmanning" class="icon fa-github" >
              <span class="label">GitHub</span>
                        </a>
      </li>
      
      <li>
        <a target="_blank"  href="/feed.xml" class="icon fa-rss" >
              <span class="label">RSS</span>
                        </a>
      </li>
       
    </ul>
    <ul class="copyright">
      <li>&copy; Xan Manning</li>
      <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
      <li>Theme: <a href="http://comfusionllc.com">Comfusion LLC</a></li>
    </ul>
    <div class="coffee"><style>.bmc-button img{width: 27px !important;margin-bottom: 1px !important;box-shadow: none !important;border: none !important;vertical-align: middle !important;}.bmc-button{line-height: 36px !important;height:37px !important;text-decoration: none !important;display:inline-flex !important;color:#ffffff !important;background-color:#000000 !important;border-radius: 3px !important;border: 1px solid transparent !important;padding: 0px 9px !important;font-size: 17px !important;letter-spacing:-0.08px !important;;box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;margin: 0 auto !important;font-family:'Lato', sans-serif !important;-webkit-box-sizing: border-box !important;box-sizing: border-box !important;-o-transition: 0.3s all linear !important;-webkit-transition: 0.3s all linear !important;-moz-transition: 0.3s all linear !important;-ms-transition: 0.3s all linear !important;transition: 0.3s all linear !important;}.bmc-button:hover, .bmc-button:active, .bmc-button:focus {-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;text-decoration: none !important;box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;opacity: 0.85 !important;color:#ffffff !important;}</style><link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet"><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/xanmanning"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"><span style="margin-left:5px">Buy me a coffee</span></a></div>
  </footer>

  <script src="/js/jquery.min.js"></script>
  <script src="/js/jquery.poptrox.min.js"></script>
  <script src="/js/skel.min.js"></script>
  <script src="/js/util.js"></script>
  <!--[if lte IE 8]><script src="/js/ie/respond.min.js"></script><![endif]-->
  <script src="/js/main.js"></script>

</body>

</html>
