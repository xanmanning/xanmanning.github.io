<!DOCTYPE html>
<html lang="en-gb">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.66.0" />

    
    
    

<title>Two Node GlusterFS in Vagrant â€¢ Xan Manning</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Two Node GlusterFS in Vagrant"/>
<meta name="twitter:description" content="I&rsquo;ve been experimenting with GlusterFS recently and I have found it fairly useful to be able to roll out a quick Gluster volume to play with. Vagrant here is your friend, you can roll out VMs fairly quickly and dispose of them leaving little to no mess afterwards.
The following Vagrantfile is for VirtualBox and will create a volume replicated across two nodes. My main aim of creating this Vagrantfile is to experience how Gluster behaves when taking servers offline, adding more servers and what happens when you replace/add bricks to a volume."/>

<meta property="og:title" content="Two Node GlusterFS in Vagrant" />
<meta property="og:description" content="I&rsquo;ve been experimenting with GlusterFS recently and I have found it fairly useful to be able to roll out a quick Gluster volume to play with. Vagrant here is your friend, you can roll out VMs fairly quickly and dispose of them leaving little to no mess afterwards.
The following Vagrantfile is for VirtualBox and will create a volume replicated across two nodes. My main aim of creating this Vagrantfile is to experience how Gluster behaves when taking servers offline, adding more servers and what happens when you replace/add bricks to a volume." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xan.manning.io/2015/12/22/two-node-glusterfs-vagrant.html" />
<meta property="article:published_time" content="2015-12-22T14:25:00+00:00" />
<meta property="article:modified_time" content="2015-12-22T14:25:00+00:00" /><meta property="og:site_name" content="Xan Manning" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">



<link rel="stylesheet" href="/css/custom-highlights.css">





<link rel="stylesheet" href="/scss/hyde-hyde.9181f25ed2263aeb878ec6f8a84f10c4ebb16150000fca8767308880bdde5ca0.css" integrity="sha256-kYHyXtImOuuHjsb4qE8QxOuxYVAAD8qHZzCIgL3eXKA=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">


<link rel="stylesheet" href="/css/custom.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://xan.manning.io/">Xan Manning</a>
      </span>
      
        
        
        
        <div class="author-image">
          <img src="https://xan.manning.io/images/avatar.png" alt="Author Image" class="img--circle img--headshot element--center">
        </div>
        
      
      
      <p class="site__description">
         Ramblings of a Linux geek and cloud fanatic dabbling in DevOps! 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Xan Manning</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/">
						<span>Blog</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/xanmanning" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/xanmanning" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/xanmanning" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	<a href="mailto:xan%20at%20manning%20dot%20io" rel="me"><i class="fas fa-at fa-lg" aria-hidden="true"></i></a>
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2020 Xan Manning
  
    <a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a>
  
</div>



  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Two Node GlusterFS in Vagrant</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Dec 22, 2015
    
    
    
    
    
    <br/>
    <i class="fas fa-clock"></i> 1 min read
</div>


  </header>
  
  
  <div class="post">
    <p>I&rsquo;ve been experimenting with GlusterFS recently and I have found it fairly useful to be able to roll out a quick Gluster volume to play with. Vagrant here is your friend, you can roll out VMs fairly quickly and dispose of them leaving little to no mess afterwards.</p>
<p>The following Vagrantfile is for VirtualBox and will create a volume replicated across two nodes. My main aim of creating this Vagrantfile is to experience how Gluster behaves when taking servers offline, adding more servers and what happens when you replace/add bricks to a volume.</p>
<p><strong>Download</strong>: <a href="https://hellholt.s3.amazonaws.com/downloads/Vagrantfiles_gluster-2node.tar.gz">Vagrantfiles_gluster-2node.tar.gz</a></p>
<p>Below is the diagram (<a href="http://gluster.readthedocs.org/en/latest/Quick-Start-Guide/Architecture/">source</a>) that describes what we are creating as our base replicated volume in Vagrant/Virtualbox:</p>
<p><img src="/images/2016/07/replicatedVolume.png" alt="GlusterFS Diagram" /></p>
<p>Once you have run &ldquo;vagrant up&rdquo;, the above will be represented on the host filesystem as two .vdi images. When you add files to your mounted volume you can start to see how data starts to replicate between volumes and how the volume repairs when bringing up a server back online.</p>
<p><img src="/images/2016/07/VBoxGluster.png" alt="GlusterFS Host Directory" /></p>
<p>Hope this helps somebody, feel free to go nuts.</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/2015/12/17/lets-encrypt-nginx.html" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Let&#39;s Encrypt - nginx!</span>
    </a>
    
    
    <a href="/2016/01/30/building-an-ansible-2-lab.html" class="navigation-next">
      <span class="navigation-tittle">Building an Ansible 2 Lab in Vagrant/VirtualBox</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    


</article>


        </div>
        
    

<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
